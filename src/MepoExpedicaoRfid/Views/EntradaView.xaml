<UserControl x:Class="MepoExpedicaoRfid.Views.EntradaView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                 mc:Ignorable="d">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="24">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <TextBlock Text="Entrada RFID" Style="{StaticResource H1}" Margin="0,0,0,16"/>

          <Grid Grid.Row="1">

<Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
  </Grid.RowDefinitions>

  <Border Style="{StaticResource CardBorder}">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="1*"/>
      </Grid.ColumnDefinitions>

      <StackPanel>
        <TextBlock Text="Dados da Entrada" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,12"/>
        
        <!-- SKU e Lote -->
        <Grid Margin="0,0,0,12">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="12"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          
          <StackPanel>
            <TextBlock Text="SKU *" Opacity="0.75" FontSize="12" Margin="0,0,0,4"/>
            <TextBox Text="{Binding Sku, UpdateSourceTrigger=PropertyChanged}" 
                     materialDesign:HintAssist.Hint="CÃ³digo do Produto"
                     FontSize="14"/>
          </StackPanel>
          
          <StackPanel Grid.Column="2">
            <TextBlock Text="Lote *" Opacity="0.75" FontSize="12" Margin="0,0,0,4"/>
            <TextBox Text="{Binding Lote, UpdateSourceTrigger=PropertyChanged}" 
                     materialDesign:HintAssist.Hint="NÃºmero do Lote"
                     FontSize="14"/>
          </StackPanel>
        </Grid>
        
        <!-- Data de FabricaÃ§Ã£o e Validade -->
        <Grid Margin="0,0,0,12">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="12"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          
          <StackPanel>
            <TextBlock Text="Data de FabricaÃ§Ã£o" Opacity="0.75" FontSize="12" Margin="0,0,0,4"/>
            <DatePicker SelectedDate="{Binding DataFabricacao}" 
                        materialDesign:HintAssist.Hint="dd/MM/yyyy"
                        FontSize="14"
                        FirstDayOfWeek="Sunday"
                        SelectedDateFormat="Short"/>
          </StackPanel>
          
          <StackPanel Grid.Column="2">
            <TextBlock Text="Data de Validade" Opacity="0.75" FontSize="12" Margin="0,0,0,4"/>
            <DatePicker SelectedDate="{Binding DataValidade}" 
                        materialDesign:HintAssist.Hint="dd/MM/yyyy"
                        FontSize="14"
                        FirstDayOfWeek="Sunday"
                        SelectedDateFormat="Short"/>
          </StackPanel>
        </Grid>
        
        <!-- DescriÃ§Ã£o -->
        <StackPanel>
          <TextBlock Text="DescriÃ§Ã£o" Opacity="0.75" FontSize="12" Margin="0,0,0,4"/>
          <TextBlock Text="{Binding Descricao, FallbackValue='Digite SKU e Lote acima', TargetNullValue='Digite SKU e Lote acima'}" 
                     FontSize="13" 
                     Opacity="0.65"
                     TextWrapping="Wrap"/>
        </StackPanel>
      </StackPanel>

      <StackPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top">
        <TextBlock Text="AÃ§Ãµes" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,12"/>
        
        <!-- Badge de Status -->
        <Border Background="#48BB78" 
                Padding="8,4" 
                CornerRadius="12"
                Margin="0,0,0,12"
                Visibility="{Binding IsReading, Converter={StaticResource BooleanToVisibilityConverter}}">
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <Ellipse Width="8" Height="8" Fill="White" Margin="0,0,6,0">
              <Ellipse.Style>
                <Style TargetType="Ellipse">
                  <Style.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                      <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                          <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                                         From="1" To="0.3" Duration="0:0:0.8" 
                                         AutoReverse="True"/>
                        </Storyboard>
                      </BeginStoryboard>
                    </EventTrigger>
                  </Style.Triggers>
                </Style>
              </Ellipse.Style>
            </Ellipse>
            <TextBlock Text="ðŸ”´ Lendo tags..." Foreground="White" FontWeight="SemiBold" FontSize="12"/>
          </StackPanel>
        </Border>
        
        <Button Content="âž• Criar SessÃ£o" 
                Command="{Binding CriarSessao}" 
                Padding="16,8" 
                Margin="0,0,0,8"
                Background="#4299E1"
                Foreground="White"
                FontWeight="SemiBold"/>
        <Button Content="â–¶ Iniciar Leitura" 
                Command="{Binding IniciarLeitura}" 
                Padding="16,8" 
                Margin="0,0,0,8"
                Background="#48BB78"
                Foreground="White"
                FontWeight="SemiBold"/>
        <Button Content="â¹ Parar Leitura" 
                Command="{Binding PararLeitura}" 
                Padding="16,8"
                Margin="0,0,0,8"
                Background="#F56565"
                Foreground="White"
                FontWeight="SemiBold"/>
        <Button Content="âœ… Finalizar Entrada" 
                Command="{Binding FinalizarEntrada}" 
                Padding="16,8"
                Margin="0,0,0,8"
                Background="#4299E1"
                Foreground="White"
                FontWeight="SemiBold"/>
        <Button Content="â›” Cancelar SessÃ£o" 
                Command="{Binding Cancelar}" 
                Padding="16,8"
                Margin="0,0,0,8"
                Background="#FC8181"
                Foreground="White"
                FontWeight="SemiBold"/>
        <Button Content="ðŸ—‘ Limpar SessÃ£o" 
                Command="{Binding Limpar}" 
                Padding="16,8"
                Margin="0,0,0,0"
                Background="#E2E8F0"
                Foreground="#1A202C"
                FontWeight="SemiBold"/>
      </StackPanel>
    </Grid>
  </Border>

  <Border Style="{StaticResource CardBorder}" Grid.Row="1">
    <StackPanel>
      <TextBlock Text="Tags lidas" Style="{StaticResource Muted}"/>
      <TextBlock Text="{Binding TotalTags}" FontSize="34" FontWeight="Bold" Margin="0,6,0,0"/>
    </StackPanel>
  </Border>

  <Border Style="{StaticResource CardBorder}" Grid.Row="2">
    <StackPanel>
      <TextBlock Text="Ãšltimas tags" FontWeight="SemiBold" Margin="0,0,0,10"/>
      <ListBox ItemsSource="{Binding Recent}" FontFamily="Consolas"/>
    </StackPanel>
  </Border>
</Grid>

          </Grid>
        </Grid>
      </ScrollViewer>
    </UserControl>
